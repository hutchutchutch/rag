############################
# apps/frontend/Dockerfile.dev
############################

FROM node:18-alpine

# 1️⃣  Working directory inside the image
WORKDIR /app

# 2️⃣  Enable Corepack so the exact pnpm version
#     declared in "packageManager" is used
RUN corepack enable

# 3️⃣  Copy lockfile + manifest *only* to leverage the cache
COPY pnpm-lock.yaml package.json ./

# 4️⃣  Install all deps (prod + dev)
RUN pnpm install --frozen-lockfile

# 5️⃣  Copy the remainder of the source tree
COPY . .

# 6️⃣  Expose the Vite dev port
EXPOSE 5173

# 7️⃣  Start the Vite dev server
CMD ["pnpm", "dev"]
