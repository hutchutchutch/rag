FROM node:18-alpine
WORKDIR /app
RUN corepack enable

# root manifests
COPY pnpm-lock.yaml pnpm-workspace.yaml package.json ./

# ⬅️ add the app manifest so vite & friends get installed
COPY apps/frontend/package.json apps/frontend/

RUN pnpm install --frozen-lockfile

# now copy the rest of the source
COPY apps/frontend /app/apps/frontend

EXPOSE 5173
CMD ["pnpm","dev"]
